<!DOCTYPE html>
<html lang="en">

<head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet" href="/assets/css/academicons-1.9.2/css/academicons.css">
<link rel="stylesheet" href="/assets/css/fontawesome-free-6.1.1-web/css/all.css">
<link href="https://fonts.googleapis.com/css?family=Merriweather:300|Raleway:400,700" rel="stylesheet">

<title>ğŸŒˆ R2LIVE Reprojection Error Jacobian ìœ ë„í•´ë³´ê¸° </title>

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ğŸŒˆ R2LIVE Reprojection Error Jacobian ìœ ë„í•´ë³´ê¸° | Giseop Kim Blog</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="ğŸŒˆ R2LIVE Reprojection Error Jacobian ìœ ë„í•´ë³´ê¸°" />
<meta name="author" content="Giseop Kim" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ìì½”ë¹„ì•ˆ ìœ ë„ ì–´ë µì§€ ì•Šì•„ìš”" />
<meta property="og:description" content="ìì½”ë¹„ì•ˆ ìœ ë„ ì–´ë µì§€ ì•Šì•„ìš”" />
<link rel="canonical" href="http://localhost:4000/slam/2024/05/25/reprojection-jacobian-r2live.html" />
<meta property="og:url" content="http://localhost:4000/slam/2024/05/25/reprojection-jacobian-r2live.html" />
<meta property="og:site_name" content="Giseop Kim Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-05-25T10:00:00+09:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ğŸŒˆ R2LIVE Reprojection Error Jacobian ìœ ë„í•´ë³´ê¸°" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Giseop Kim"},"dateModified":"2024-05-25T10:00:00+09:00","datePublished":"2024-05-25T10:00:00+09:00","description":"ìì½”ë¹„ì•ˆ ìœ ë„ ì–´ë µì§€ ì•Šì•„ìš”","headline":"ğŸŒˆ R2LIVE Reprojection Error Jacobian ìœ ë„í•´ë³´ê¸°","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/slam/2024/05/25/reprojection-jacobian-r2live.html"},"url":"http://localhost:4000/slam/2024/05/25/reprojection-jacobian-r2live.html"}</script>
<!-- End Jekyll SEO tag -->


<script type="text/javascript" src="/assets/js/darkmode.js"></script>


<!-- fabicon -->
<link rel="icon" type="image/png" href="/assets/icon/me.png">
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        TeX: {
          equationNumbers: {
            autoNumber: "AMS"
          }
        },
        tex2jax: {
        inlineMath: [ ['$', '$'] ],
        displayMath: [ ['$$', '$$'] ],
        processEscapes: true,
      }
    });
MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
        alert("Math Processing Error: "+message[1]);
    });
MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
        alert("Math Processing Error: "+message[1]);
    });
</script>
<script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
    
</head><body>
  <main class="container">
    <section class="about">
      <div class="about-header condensed">
      <div class="about-title">
      <a href="/">
        
        <img src="/assets/giseopkim_thermal.png" alt="Giseop Kim" />
        
      </a>
      <h2 id="title">
        <a href="/">Giseop Kim</a>
      </h2>
      </div><p class="tagline">SLAM Engineer</p></div>
      
      <ul class="social about-footer condensed"><a href="https://www.linkedin.com/in/giseop-kim-71683088" target="_blank">
          <li>
            <i class="icon-linkedin-squared"></i>
          </li>
        </a><a href="https://scholar.google.com/citations?user=9mKOLX8AAAAJ&hl=ko&oi=ao" target="_blank">
          <li>
            <i class="ai ai-google-scholar"></i>
          </li>
        </a><a href="https://github.com/gisbi-kim" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a><a href="https://bit.ly/giseopkim" target="_blank">
          <li>
            <i class="fa fa-user" style="font-size: 2.09em;"></i>
            <!-- <i> notion</i> -->
            <!-- <i class="fa fa-user"></i> -->
          </li>
        </a><a href="https://youtube.com/channel/UCrmVMJ3KEFbDD9EtnAmDT6g" target="_blank">
          <li>
            <i class="icon-youtube"></i>
          </li>
        </a></ul><p class="about-footer condensed">&copy;
        2024</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </section>
    <section class="content">
      <div class="post-container">
  <a class="post-link" href="/slam/2024/05/25/reprojection-jacobian-r2live.html">
    <h2 class="post-title">ğŸŒˆ R2LIVE Reprojection Error Jacobian ìœ ë„í•´ë³´ê¸° </h2>
  </a>
  <hr style="border:1px foo rgb(193, 198, 200)">
  <div class="post-meta">
    <div class="post-date"><i class="icon-calendar"></i>May 25, 2024</div><ul class="post-categories"><li>SLAM</li></ul></div>
  <div class="post">
    <h1 id="ìì½”ë¹„ì•ˆ-ìœ ë„">ìì½”ë¹„ì•ˆ ìœ ë„</h1>
<ul>
  <li>ì–´ë µì§€ ì•Šì•„ìš”</li>
</ul>

<h2 id="ê°œë¡ ">ê°œë¡ </h2>
<ul>
  <li>ìì½”ë¹„ì•ˆ, ì•¼ì½”ë¹„ì•ˆ, â€¦ ë‹¤ì–‘í•˜ê²Œ ë¶ˆë¦¬ëŠ” ì´ ë…€ì„</li>
  <li>ê·¸ëƒ¥ multi-dimensional ê¸°ìš¸ê¸°ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.</li>
  <li>Gauss-Newton optimization ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸°ìš¸ê¸° ê°’ì„ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸.
    <ul>
      <li>Kalman Filter ì—ì„œë„ ì“°ì¸ë‹¤. (ps. ì‚¬ì‹¤ iterative KFëŠ” GN ê³¼ ê°™ë‹¤. ref: 1993 The Iterated Kalman Filter Update as a Gauss-Newton Method)</li>
    </ul>
  </li>
  <li>ì–´ë–¤ cost function $c$ ê°€ ìˆê³ , ë³´í†µ ì´ê±´ SLAMì—ì„œ $c := h(\textbf{x}) - \textbf{z} = \textbf{H}\textbf{x} - \textbf{z}$ ì´ëŸ° í˜•íƒœë¡œ ë§ì´ ì“°ì¸ë‹¤. H ëŠ” measurement function (í˜„ì¬ ìƒíƒœì—ì„œì˜ ì˜ˆì¸¡ ì¸¡ì • ê°’ì„ ìœ„í•œ ëª¨ë¸) ì´ê³ , z ëŠ” ì‹¤ì œ ì¸¡ì • ê°’, ê·¸ë¦¬ê³  cost ë€ ê·¸ ë‘˜ì˜ ì°¨ì´ ë¥¼ ì˜ë¯¸í•˜ëŠ” ê²Œ ë˜ê² ë‹¤.</li>
  <li>ê·¸ë¦¬ê³  ë‹¹ì—°íˆ (modelì´ ì˜ ì„¤ì •ë˜ì–´ ìˆê³ ) í˜„ì¬ state ê°’ $\textbf{x}$ ê°€ truth ì— ê°€ê¹ë‹¤ë©´, ì˜ˆì¸¡ ì¸¡ì •ê°’ì€ ì‹¤ì œ ì¸¡ì •ê°’ê³¼ ê±°ì˜ ê°™ê²Œ (== ì‘ì€ cost) ë‚˜ì˜¬ ê²ƒì´ë‹¤.</li>
  <li>ê·¸ë¦¬ê³  ë°˜ëŒ€ë¡œ ìƒê°í•˜ë©´, ê·¸ cost ê°€ ì‘ì•„ì§€ê²Œ í•˜ë„ë¡ í˜„ì¬ state ê°’ $\textbf{x}$ ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆìœ¼ë©´, í˜„ì¬ state ê°’ $\textbf{x}$ ì„ ë” truth ì— ê°€ê¹ê²Œ ë§Œë“¤ì—ˆë‹¤ê³  ë§í•  ìˆ˜ ìˆê² ë‹¤.</li>
  <li>ê·¸ëŸ°ë° ì‹¤ì œ ì„¸ê³„ì˜ ë¬¸ì œì—ì„œëŠ” cost ë„ vector ì´ê³ , state ë„ vector ì´ë‹¤.
    <ul>
      <li>ì˜ˆë¥¼ ë“¤ì–´ì„œ, reprojection error ì˜ cost ëŠ” ê°€ë¡œ pixel ì°¨ì´, ì„¸ë¡œ pixel ì°¨ì´ ì˜ 2-dimension vectorì´ê³ , state ëŠ” ì •í•˜ê¸° ë‚˜ë¦„ì´ì§€ë§Œ ê°€ì¥ ê°„ë‹¨í•˜ê²ŒëŠ” position ê³¼ rotation (attitude) ë¥¼ concat í•œ 6-dimensino vector ë¼ê³  í•  ìˆ˜ ìˆë‹¤.</li>
    </ul>
  </li>
  <li>ë”°ë¼ì„œ cost ì˜ ê° ì„±ë¶„ë§ˆë‹¤, state ì˜ ê° ì„±ë¶„ì— ëŒ€í•´ ë¯¸ë¶„í•œ ê²ƒì´ scalar ë¡œ ë‚˜ì˜¤ê²Œ ë˜ë¯€ë¡œ</li>
  <li>vector costì— ëŒ€í•œ vector state ì˜ ìì½”ë¹„ì•ˆì€ matrix ê°€ ë˜ê²Œ ëœë‹¤.</li>
  <li>ê·¸ëŸ¬ë©´ ì´ ë•Œ ìì½”ë¹„ì•ˆì˜ shape ì€ ì–´ë–»ê²Œ ë ê¹Œìš”?</li>
  <li>ìì½”ë¹„ì•ˆì€ ì´ë ‡ê²Œ ê¸°ì–µí•˜ë©´ ëœë‹¤. matrix ë„¤ëª¨ì˜ ì„¸ë¡œ(ì¦‰, row ë“¤) ëŠ” cost, ê°€ë¡œ(ì¦‰, columnë“¤)ëŠ” state.
    <ul>
      <li>ê·¸ëŸ¼ ìœ„ ì˜ˆì‹œì—ì„œëŠ” 2x6 ëª¨ì–‘ì˜ ìì½”ë¹„ì•ˆ ë§¤íŠ¸ë¦­ìŠ¤ê°€ êµ¬í•´ì§€ê²Œ ëœë‹¤.</li>
    </ul>
  </li>
  <li>ì´ì œ íŠ¹ì • ìƒí™© (ì¦‰, íŠ¹ì • state ì™€ íŠ¹ì • cost) ì—ì„œì˜ ìì½”ë¹„ì•ˆ ë§¤íŠ¸ë¦­ìŠ¤ê°€ ì•Œë ¤ì§€ë©´, ê·¸ ë‹¤ìŒ ë‹¨ê³„ëŠ” ì™„ì „í•œ ê³„ì‚°ê¸°ì´ë‹¤.
    <ul>
      <li>GNì€ normal equation ì„ í’€ë©´ ë˜ê³ ,</li>
      <li>KFëŠ” ìœ ëª…í•œ KF equation ë”°ë¼ì„œ í’€ë©´ëœë‹¤.</li>
    </ul>
  </li>
</ul>

<h2 id="ê°œë¡ -2">ê°œë¡  2</h2>
<ul>
  <li>ê·¸ëŸ°ë° ì„¸ìƒì€ nonlinear í•˜ë¯€ë¡œ,</li>
  <li>ìš°ë¦¬ëŠ” vector space ì— ì‚´ê³  ìˆì§€ ì•Šì€ $\textbf{x}$ ë¥¼ ìµœì í™” í•  ìˆ˜ ì—†ê³ ,</li>
  <li>ëŒ€ì‹  vector spaceì— ì‚´ê³  ìˆëŠ” $\delta\textbf{x}$ ë¥¼ ìµœì í™” í•´ì•¼ í•œë‹¤.
    <ul>
      <li>ì‚¬ì‹¤ SLAMì˜ ê±°ì˜ ëª¨ë“  ê²½ìš°ì—ì„œ stateì˜ rotation ì— í•œì •ëœë‹¤. $\mathbf{R} = \textbf{Exp}(\delta{r})$ ì´ ì–˜ê¸´ë° â€¦ rotation formulation ì´ì•¼ê¸°ê¹Œì§€ í•˜ë©´ ë„ˆë¬´ ê¸¸ì–´ì§€ë‹ˆ ì´ê²ƒì€ ë‹¤ë¥¸ ê²Œì‹œê¸€ <a href="/slam/2023/12/17/nano-lie-theory.html">ì•ì˜ ë¸”ë¡œê·¸ íŠœí† ë¦¬ì–¼</a> ë¡œ ë§í¬ë¥¼ ë‚¨ê¸´ë‹¤ ..</li>
    </ul>
  </li>
  <li>ì¦‰, $c = \textbf{H}\textbf{x} - \textbf{z}$ ëŒ€ì‹ , $\textbf{H}(\textbf{x} + \delta\textbf{x}) - \textbf{z}$ ì— ëŒ€í•œ ìì½”ë¹„ì•ˆì„ êµ¬í•œë‹¤.</li>
  <li>ë­”ì†Œë¦¬ëƒë©´, $\frac{d(\mathbf{H}\mathbf{x} - \mathbf{z})}{d\mathbf{x}}$ ëŒ€ì‹ ì—, $\frac{d(\mathbf{H}(\textbf{x} + \delta\textbf{x}) - \mathbf{z})}{d\delta\mathbf{x}}$ ë¥¼ êµ¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.</li>
  <li>ì–´ë ¤ì›Œë³´ì´ì§€ë§Œ ê·¸ëƒ¥ cost ì™€ state ê°€ $\mathbf{x}$ ì—ì„œ  $\delta\mathbf{x}$ ë¡œ ë°”ë€ê²ƒì´ ì „ë¶€ì´ë‹¤. $\delta\mathbf{x}$ ë¼ëŠ” ë¬¸ìê°€ ê´œíˆ ì–´ë ¤ì›Œ ë³´ì´ë©´ $\mathbf{x}_d$ ë­ ì´ëŸ°ì‹ìœ¼ë¡œ ì¨ë³¼ ìˆ˜ë„ ìˆê² ë‹¤. $\delta\mathbf{x}$ ë„ ê·¸ì € vectorì´ë‹¤. ë§ì€ í…ìŠ¤íŠ¸ë¶ì—ì„œ $\delta\mathbf{x}$ ë¼ê³  ì“´ë‹¤.</li>
  <li>ì´ ë•Œ í•µì‹¬ì€, $\frac{d(\mathbf{H}(\textbf{x} + \delta\textbf{x}) - \mathbf{z})}{d\delta\mathbf{x}}$ ë¼ëŠ” ë¯¸ë¶„ì—ì„œ, $\mathbf{x}$ ì— ëŒ€í•´ ë¯¸ë¶„í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ëŠ” ì ì´ë‹¤. ì¦‰, ì´ ë•ŒëŠ”, $\mathbf{x}$ ëŠ” ìƒìˆ˜ê°’ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì§ì „ ì‹œì ì˜ $\mathbf{x}$ ê°€ ì–´ë–¤ ê°’ $\mathbf{b}$ ì˜€ë‹¤ê³  í•˜ì. ê·¸ëŸ¼ ë°©ê¸ˆ ì „ì˜ ë¯¸ë¶„ ì‹ì„ ì¢€ ë” ì‹¬ë¦¬ì ìœ¼ë¡œ ì¥ë²½ì´ ëœí•œ í˜•íƒœë¡œ ì¨ë³´ë©´ $\frac{d(\mathbf{H}(\textbf{b} + \textbf{x}_d) - \mathbf{z})}{d\mathbf{x}_d}$ ë­ ì´ë ‡ê²Œë„ ì¨ë³¼ ìˆ˜ ìˆê² ë‹¤. ì¢€ ë” ë§ˆìŒì´ í¸ì•ˆí•œ í˜•íƒœë¥¼ ìœ„í•´ì„œ ê´„í˜¸ë¥¼ í’€ì–´ì„œ ì¨ë³´ë©´ $\frac{d(\mathbf{H}\textbf{x}_d - (\mathbf{z} - \mathbf{H}\textbf{b}))}{d\mathbf{x}_d}$ ì´ë ‡ê²Œ ì¨ë³¼ ìˆ˜ë„ ìˆê² ë‹¤. ì¦‰, ì›ë˜ ê±°ë‘ ëª¨ì–‘ìƒˆëŠ” ë˜‘ê°™ìœ¼ë‹ˆ ì«„ í•„ìš” ì—†ë‹¤.</li>
  <li>$\frac{d(\mathbf{A}\mathbf{x})}{d\mathbf{x}} = \mathbf{A}$ ì´ë¯€ë¡œ $\frac{d(\mathbf{H}\textbf{x}_d - (\mathbf{z} - \mathbf{H}\textbf{b}))}{d\mathbf{x}_d} = \mathbf{H}$ ì´ë‹¤. ì°¸ ì‰½ì£ ?</li>
  <li>ì¦‰, ë¯¸ë¶„ëŒ€ìƒì˜ 1ì°¨ linear term <strong>ë§Œ</strong> ìˆìœ¼ë©´ í¸ë¯¸ë¶„ì€ ë§¤ìš° ì‰½ê³  ìëª…í•´ì§„ë‹¤.</li>
  <li>SLAM ë…¼ë¬¸ë“¤ì˜ ëŒ€ë¶€ë¶„ì˜ ìì½”ë¹„ì•ˆ ìœ ë„ì—ì„œëŠ” ì´ íŠ¸ë¦­ì„ ì´ìš©í•˜ê³  ìˆë‹¤.</li>
  <li>ì™œëƒí•˜ë©´,
    <ul>
      <li>ë¯¸ë¶„ì„ í•´ì•¼í•˜ëŠ” ëŒ€ìƒì€ ë³´í†µ ì¼ë°˜ì ìœ¼ë¡œ position, rotation (attitude), velocity, bias ë“±ì¸ë°,</li>
      <li>ì—¬ê¸°ì—ì„œ rotation ì™¸ì—ëŠ” ëª¨ë‘ ì´ë¯¸ vector space ì—ì„œ ì‚´ê³  ìˆë‹¤.</li>
      <li>vector space ì— ì‚¬ëŠ” í•­ëª©ë“¤ì€ ìœ„ì˜ $\frac{d(\mathbf{A}\mathbf{x})}{d\mathbf{x}} = \mathbf{A}$ ë¼ëŠ” ì‚¬ì‹¤ì„ ì´ë¯¸ ì ìš©í•  ìˆ˜ ìˆë‹¤.
        <ul>
          <li>ì˜ˆë¥¼ ë“¤ì–´ì„œ
            <ul>
              <li>ì–´ë–¤ position termì— ëŒ€í•œ cost function ì´ position ì— ëŒ€í•œ linear combination (ë‹¤í•­ì°¨ìˆ˜) ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤ê³  í•˜ë”ë¼ë„,</li>
              <li>iterative optimization ì—ì„œëŠ” ë¯¸ì†Œë³€ìœ„ë¥¼ ìµœì í™” í•˜ê¸° ë•Œë¬¸ì— ë¯¸ì†Œë³€ìœ„ position ì˜ 2ì°¨ ì´ìƒë“¤ì€ ê±°ì˜ 0ìœ¼ë¡œ ê·¼ì‚¬í•  ìˆ˜ ìˆë‹¤, ì´ë ‡ê²Œ í•´ë²„ë¦¬ê²Œ ë˜ë©´</li>
              <li>ê²°êµ­ ë‚¨ëŠ” ê²ƒì€ 1ì°¨ termìœ¼ë¡œ ê°„ì†Œí™” í•  ìˆ˜ ìˆë‹¤.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>í•˜ì§€ë§Œ rotation term ì˜ ë¯¸ì†Œë³€ìœ„ì¸ rotation vector (== lie algebra) ëŠ” default í˜•íƒœë¡œëŠ” 1ì°¨ termë§Œì´ ë‚¨ì§€ ì•Šê¸° ë•Œë¬¸ì—,</li>
      <li>ëª‡ ê°€ì§€ íŠ¸ë¦­ë“¤ì„ ë” ë”í•´ì¤˜ì„œ, $\frac{d(\mathbf{A}\mathbf{r})}{d\mathbf{r}} = \mathbf{A}$ ê³¼ ê°™ì´ ìœ„ì˜ ê¸°ë³¸ íŠ¸ë¦­ì„ ë™ì¼í•˜ê²Œ ì ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ê³¼ì •ì´ë‹¤.</li>
    </ul>
  </li>
  <li>ê·¸ ëª‡ ê°€ì§€ íŠ¸ë¦­ë“¤ì´ ì–´ë–¤ ê²ƒì¸ì§€ ì‹¤ì œ ì˜ˆì‹œë¥¼ í†µí•´ ì•Œì•„ë³´ì.</li>
</ul>

<h2 id="r2live-reprojection-error">R2LIVE reprojection error</h2>
<ul>
  <li><a href="https://arxiv.org/pdf/2102.12400">R2LIVE ë…¼ë¬¸ì˜ appendix</a> ì˜ reprojection error ìœ ë„ ê³¼ì •ì„ ì¡°ê¸ˆ ë” ìƒì„¸í•˜ê²Œ í’€ì–´ì„œ ì¨ë³´ëŠ” ê²Œ ì´ í¬ìŠ¤íŠ¸ì˜ ëª©ì ì´ë‹¤.</li>
</ul>

\[\begin{align*}
\mathbf{P}_{\mathbf{C}} (\check{\mathbf{x}}_{k+1} \boxplus \delta \check{\mathbf{x}}_{k+1}, {}^{\mathbf{G}}\mathbf{P}_s) = \left( {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}} \textbf{Exp} \left( {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}} \right) {}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}} \textbf{Exp} \left( {}^{\mathbf{I}}\delta \check{\mathbf{r}}_{C_{k+1}} \right) \right)^T {}^{\mathbf{G}}\mathbf{P}_s - {}^{I}\check{\mathbf{p}}_{C}\\ 
- {}^{\mathbf{I}}\delta \check{\mathbf{p}}_{\mathbf{C}} - \left( {}^{\mathbf{I}}\check{\mathbf{R}}_{\mathbf{C}} \textbf{Exp} \left( {}^{\mathbf{I}}\delta \check{\mathbf{r}}_{\mathbf{C}} \right) \right)^T \left( {}^{\mathbf{G}}\check{\mathbf{p}}_{I_{k+1}} + {}^{\mathbf{G}}\delta \check{\mathbf{p}}_{I_{k+1}} \right)
\end{align*}\]

<p>$$</p>

<ul>
  <li>ìœ„ ìˆ˜ì‹ì„ ê° ë¯¸ì†Œë³€ìœ„ subvector ë“¤ì— ëŒ€í•´ì„œ í¸ë¯¸ë¶„ í•˜ë©´, ê·¸ subvectorì— ëŒ€í•œ submatrix (block) Jacobianë“¤ì„ ì–»ì„ ìˆ˜ ìˆë‹¤. ì´ê±¸ ê·¸ì € ì˜ ìŒ“ì•„ì„œ í•˜ë‚˜ì˜ Jacobian matrix ë¥¼ ë§Œë“¤ë©´ ëœë‹¤.</li>
  <li>ì˜ˆë¥¼ ë“¤ì–´ì„œ, world ì¢Œí‘œê³„ì—ì„œì˜, position ì— ëŒ€í•œ ë¯¸ì†Œë³€ìœ„ ${}^{\mathbf{G}}\delta \check{\mathbf{p}}_{I_{k+1}}$ ì— ëŒ€í•´ ìœ„ì˜ cost (reprojection error) ë¥¼ ë¯¸ë¶„í•˜ë©´,
    <ul>
      <li>$\mathbf{M}_{\mathbf{B}}$ ë¼ëŠ” ë¸”ë¡ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.</li>
    </ul>
    <figure align="center">
      <img src="/assets/data/2024-05-25-reprojection-jacobian-r2live/visual_diff_pos.png" width="1000" />
      <figcaption></figcaption>
  </figure>
    <ul>
      <li>ps. dp ì…ì¥ì—ì„œ dr ì€ 0ìœ¼ë¡œ ë¬´ì‹œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì´ ê²½ìš°ì—, $\textbf{Exp} \left( {}^{\mathbf{I}}\delta \check{\mathbf{r}}_{\mathbf{C}} \right)$ ì€ $\mathbf{I}$ ë¡œ ê·¼ì‚¬í•´ì„œ ì €ë ‡ê²Œ ë˜ì—ˆë‹¤.</li>
    </ul>
  </li>
  <li>ì•„ë¬´íŠ¼ ì´ë¯¸ vector space ì— ì‚´ê³  ìˆëŠ” position termì— ëŒ€í•´ì„œëŠ” cost ê°€ 1ì°¨ termë§Œ ì´ë¯¸ ì˜ˆì˜ê²Œ ë‚¨ê²¨ì ¸ìˆì„ ë•Œ, í¸ë¯¸ë¶„í•˜ì—¬ ìì½”ë¹„ì•ˆ ë¸”ë¡ì„ ì–»ì–´ë‚´ëŠ” ê²ƒì´ ë§¤ìš° ìëª…í•¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.</li>
  <li>ê·¸ë ‡ë‹¤ë©´ ì´ì œ rotation ìª½ termì— ëŒ€í•œ ì¶”ê°€ íŠ¸ë¦­ì„ ì•Œì•„ë³´ìëŠ” ê²ƒì´ë‹¤.</li>
  <li>ì¦‰, ì•„ë˜ì˜ $\mathbf{M}_{\mathbf{A}}$ ëŠ” ë„ëŒ€ì²´ ì–´ë–»ê²Œ ì–»ì–´ì§€ëŠ” ê²ƒì¸ê°€?
    <figure align="center">
      <img src="/assets/data/2024-05-25-reprojection-jacobian-r2live/visual_diff_rot.png" width="1000" />
      <figcaption></figcaption>
  </figure>
  </li>
  <li>ì¼ë‹¨ rotation termì— ëŒ€í•œ cost (ì´ˆë¡ìƒ‰ ë°•ìŠ¤) ì—ì„œ, ë¯¸ë¶„ëŒ€ìƒì¸ ${}^{\mathbf{I}}\delta \check{\mathbf{r}}_{\mathbf{C}}$ ê°€ 1ì°¨ termìœ¼ë¡œ ì¡´ì¬í•˜ê³  ìˆì§€ ì•Šë‹¤.</li>
  <li>ë”°ë¼ì„œ ì € ì´ˆë¡ìƒ‰ ë°•ìŠ¤ë¥¼ ì§€ì§€ê³  ë³¶ì•„ì„œ ${}^{\mathbf{I}}\delta \check{\mathbf{r}}_{\mathbf{C}}$ ì— ì–´ë–¤ ë§¤íŠ¸ë¦­ìŠ¤ê°€ ê·¸ì € ë‹¨ìˆœí•˜ê²Œ matmulë¡œ ê³±í•´ì§„ í˜•íƒœë¡œ ë§Œë“œëŠ” ê²ƒì´ ì´ì œ ëª©í‘œì´ë‹¤.</li>
  <li>ì¼ë‹¨ ë…¼ì˜ë¥¼ ë‹¨ìˆœí™” í•˜ê¸° ìœ„í•´
    <ul>
      <li>extrinsic parameter ëŠ” ê³ ì •í•˜ì. ì¦‰, IMUì— ëŒ€í•œ camera ì˜ relative rotation ì— ëŒ€í•œ ë¯¸ì†Œë³€í™”ëŸ‰ì´ ì—†ëŠ” ê²ƒì´ë‹¤. ì¡°ì •í•˜ì§€ ì•Šì„ ê²ƒì´ê¸° ë•Œë¬¸ì—. ì¦‰, ${}^{\mathbf{I}}\delta \check{\mathbf{r}}_{C_{k+1}}$ ì„ $\mathbf{0}$ ì´ë‹¤. ê·¸ëŸ¼ $\textbf{Exp} \left( {}^{\mathbf{I}}\delta \check{\mathbf{r}}_{C_{k+1}} \right)$ ëŠ” $\mathbf{I}$ ê°€ ëœë‹¤.</li>
      <li>ê·¸ëŸ¬ë©´ $\left( {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}} \textbf{Exp} \left( {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}} \right) {}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}} \textbf{Exp} \left( {}^{\mathbf{I}}\delta \check{\mathbf{r}}_{C_{k+1}} \right) \right)^T {}^{\mathbf{G}}\mathbf{P}_s$ ëŠ”</li>
      <li>ì´ë ‡ê²Œ $\left( {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}} \textbf{Exp} \left( {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}} \right) {}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}} \right)^T {}^{\mathbf{G}}\mathbf{P}_s$ ê°€ ëœë‹¤.</li>
    </ul>
  </li>
  <li>íŠ¸ë¦­ 1: $\delta \mathbf{r} $ ì´ ì‘ì„ ë•Œ, $\textbf{Exp} (\delta\mathbf{r}) \approx \mathbf{I} + \left[ \delta\mathbf{r}\right]_{\times}$ ì´ë‹¤.
    <ul>
      <li>ê·¸ëŸ¬ë©´ $\left( {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}} \textbf{Exp} \left( {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}} \right) {}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}} \right)^T {}^{\mathbf{G}}\mathbf{P}_s$ ëŠ”</li>
      <li>ì´ë ‡ê²Œ $\left( {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}} \left(\mathbf{I} + \left[ {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}}\right]_{\times}\right) {}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}} \right)^T {}^{\mathbf{G}}\mathbf{P}_s$ ê°€ ëœë‹¤.</li>
    </ul>
  </li>
  <li>íŠ¸ë¦­ 2: $\left( \mathbf{A} \mathbf{B} \mathbf{C} \right)^{T} = \mathbf{C}^{T} \mathbf{B}^{T} \mathbf{A}^{T}$ ë¥¼ ì´ìš©í•´ì„œ ìœ„ì˜ ì‹ì„ í´ì£¼ë©´
    <ul>
      <li>ì´ë ‡ê²Œ $ {}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} \left(\mathbf{I} + \left[ {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}}\right]_{\times}\right)^{T} {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s$ ê°€ ëœë‹¤.</li>
    </ul>
  </li>
  <li>íŠ¸ë¦­ 3: $\left( \mathbf{A} + \mathbf{B} \right)^{T} = \mathbf{A}^{T} + \mathbf{B}^{T} $ ë¥¼ ì´ìš©í•´ì„œ ìœ„ì˜ ì‹ì„ í´ì£¼ë©´
    <ul>
      <li>ì´ë ‡ê²Œ ${}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s + {}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} \left[ {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}}\right]_{\times}^{T} {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s$ ê°€ ëœë‹¤.</li>
      <li>ê·¸ë‚˜ì €ë‚˜ ì²«ë²ˆì§¸ í…€ ${}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s$ ëŠ” rotation ë¯¸ì†Œë³€ìœ„ì— ëŒ€í•´ì„œëŠ” ìƒìˆ˜ì´ë¯€ë¡œ ë¯¸ë¶„í•˜ë©´ 0ì´ ë  ê²ƒì´ë‹¤. ë”°ë¼ì„œ ê·¸ëƒ¥ í¸ì˜ìƒ ê°„ë‹¨í•˜ê²Œ $c$ ë¼ê³  í•˜ì.</li>
    </ul>
  </li>
  <li>íŠ¸ë¦­ 4: skew-symmetric matrix ì˜ ì •ì˜ì¸, $\left[\delta\mathbf{r}\right]_\times^{T} = - \left[\delta\mathbf{r}\right]$ ë¥¼ ì´ìš©í•˜ë©´
    <ul>
      <li>ì´ë ‡ê²Œ $-{}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} \left[ {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}}\right]_{\times} {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s + c$ ê°€ ëœë‹¤.</li>
    </ul>
  </li>
  <li>íŠ¸ë¦­ 5: skew-symmetric matrix ëŠ” ë‘ ë²¡í„°ì˜ cross-product ì˜ matrix-vector í‘œí˜„ì‹ê³¼ë„ ê°™ë‹¤. ê·¸ë ‡ë‹¤ë©´ the cross product is anticommutative ë¼ëŠ” ì„±ì§ˆ $ \mathbf {a} \times \mathbf {b} =-(\mathbf {b} \times \mathbf {a} )$ ë¥¼ ì´ìš©í•˜ë©´
    <ul>
      <li>ìœ„ì˜ ì‹ì—ì„œ ì´ ë¶€ë¶„ $\left[ {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}}\right]_{\times} {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s = -\left[ {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s \right]_{\times} {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}} $ ê°€ ëœë‹¤.</li>
      <li>ê·¸ëŸ¬ë©´ $-{}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} \left[ {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}}\right]_{\times} {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s + c$ ëŠ”</li>
      <li>ì´ë ‡ê²Œ ${}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} \left[ {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s \right]_{\times} {}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}} + c$ ê°€ ëœë‹¤.</li>
    </ul>
  </li>
  <li>ë‹¤ ì™”ë‹¤!</li>
  <li>ìœ„ ì‹ì„ ${}^{\mathbf{G}}\delta \check{\mathbf{r}}_{I_{k+1}}$ ì— ëŒ€í•´ ë¯¸ë¶„í•˜ëŠ” ê²ƒì€ ì´ì œ ê·¸ì € $\frac{d(\mathbf{A}\mathbf{x})}{d\mathbf{x}} = \mathbf{A}$ ì˜ ì‘ì—…ì´ë‹¤.</li>
  <li>ë”°ë¼ì„œ ë…¼ë¬¸ì—ì„œ jacobian block, ì¦‰ ìœ„ì˜ ê·¸ë¦¼ì—ì„œ $\mathbf{M}_{\mathbf{A}}$ block ì´ ${}^{\mathbf{I}}\check{\mathbf{R}}_{C_{k+1}}^{T} \left[ {}^{\mathbf{G}}\check{\mathbf{R}}_{I_{k+1}}^{T} {}^{\mathbf{G}}\mathbf{P}_s \right]_{\times}$ ì˜€ë˜ ê²ƒì´ë‹¤.</li>
  <li>ìœ ë„ ë!</li>
</ul>

<h2 id="ê²°ë¡ ">ê²°ë¡ </h2>
<ul>
  <li>1
    <ul>
      <li>í†µìƒì ìœ¼ë¡œ SLAMì—ì„œ í‘¸ëŠ” stateë“¤ì€ í•­ìƒ ê±°ê¸°ì„œ ê±°ê¸°ì´ë‹¤. position, velocity, attitude (rotation), bias, gravity, â€¦</li>
      <li>ì´ë“¤ substateë“¤ì— ëŒ€í•´ì„œ, ìì½”ë¹„ì•ˆ êµ¬í•˜ëŠ” ê²ƒì€ ê±°ì˜ ê³µì‹í™”ë˜ì–´ìˆë‹¤. ì¦‰, ëŠ˜ í•­ìƒ ê·¸ëŸ°ë°©ì‹ìœ¼ë¡œ â€¦ ê±°ê¸°ì„œ ê±°ê¸°.</li>
      <li>The One Ring: ì—¬ëŸ¬ ê·¼ì‚¬(approximations)ë“¤ê³¼ linear algebera trick ë“¤ì„ ì´ìš©í•´ì„œ costë¥¼ substate ì— ëŒ€í•œ 1ì°¨ì‹ìœ¼ë¡œ í‘œí˜„í•œë‹¤. ë
        <ul>
          <li>rotationì„ ì œì™¸í•œ substateë“¤ì€ ì´ë¯¸ vector space ì— ìˆìœ¼ë¯€ë¡œ ë¯¸ë¶„ì´ ì–´ë µì§€ ì•Šê³ ,</li>
          <li>rotation ì´ë¼ëŠ” termì€ ì–´ë–¤ ë¬¸ì œë“¤ í’€ë˜ ì¡´ì¬í•˜ëŠ” ìš”ì†Œì´ë¯€ë¡œ, ì–´ë–¤ ë¬¸ì œë¥¼ í’€ë˜ ìœ„ì˜ íŠ¸ë¦­ë“¤ì´ ê±°ì˜ í•­ìƒ ì´ìš©ëœë‹¤. ë”°ë¼ì„œ ìœ„ì—ì„œ ìš”ì•½í•œ ê·¸ ì´ìƒìœ¼ë¡œ ë­”ê°€ ë” í•„ìš”í•  ì¼ë„ ë³„ë¡œ ì—†ë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>2
    <ul>
      <li>ìš”ì¦˜ Symforce ë“± manualí•˜ê²Œ ê·¼ì‚¬í•˜ì§€ ì•Šê³  symbolic í•˜ê²Œ (ì‚¬ëŒì´ ë³´ê¸°ì—ëŠ” ë³µì¡í•˜ê²Œ) ìë™ìœ¼ë¡œ í’€ì–´ì£¼ëŠ” ë¯¸ë¶„ê¸°ë“¤ë„ ìˆìœ¼ë‚˜ â€¦</li>
      <li>ìœ„ì™€ ê°™ì´ manual í•˜ê²Œ ìì½”ë¹„ì•ˆì„ êµ¬í•˜ë©´ ì‚¬ëŒì´ ì½ëŠ” ì½”ë“œê°€ ì•„ì£¼ ì˜ˆë»ì§„ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. interpretable í•œ ì½”ë“œì¸ì§€ë„ ìœ ì§€ë³´ìˆ˜ê´€ì ì—ì„œ ì¤‘ìš”í•˜ë‹ˆê¹Œ.
        <ul>
          <li>ë¬¼ë¡  Pytorchë‚˜ Ceres ì²˜ëŸ¼ automatic symbolic ì´ë“  manual symbolic ì´ë“  ë‘˜ ë‹¤ í•˜ì§€ì•Šê³  ê³„ì‚°ê·¸ë˜í”„ë¥¼ ìœ ì§€í•´ì„œ ë¯¸ë¶„ê°’ (value) ë§Œì„ ì•Œì•„ì„œ ê³„ì‚°í•´ì£¼ë©´ ìì½”ë¹„ì•ˆì´ ì–´ì©Œë„¤ ë‹¤ ëª°ë¼ë„ ë˜ê¸´ í•˜ì§€ë§Œ â€¦ ì•Œê³  ì“°ëŠ” ê²ƒê³¼ ëª¨ë¥´ê³  ì“°ëŠ” ê²ƒì€ ë””ë²„ê¹…í•  ë•Œ ì°¨ì´ê°€ ìˆë‹¤ê³  ìƒê°í•œë‹¤. ê·¸ë¦¬ê³  ì—¬ì „íˆ concise í•œ code base ë“¤ì—ì„œëŠ” ì§ì ‘ ìì½”ë¹„ì•ˆì„ êµ¬í•´ì„œ ê°„ë‹¨í•œ solve ë¥¼ ì§ì ‘ ìˆ˜í–‰í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ë“¤ë„ ë§ìœ¼ë¯€ë¡œ ì•Œì•„ë‘ë©´ ìœ ìš©í•  ê²ƒì´ë‹¤ (ì˜ˆ: kiss-icp). ëª¨ë¥´ë©´ ë¬´ì‘ì • ë‘ë µì§€ë§Œ ì•Œë©´ ì‰½ë‹¤.</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

  </div>

  <hr style="border:1px foo rgb(193, 198, 200)"><div id="disqus_thread" style="margin-top:25px"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://localhost:4000/slam/2024/05/25/reprojection-jacobian-r2live.html';
      this.page.identifier = 'http://localhost:4000/slam/2024/05/25/reprojection-jacobian-r2live.html';
    };
    (function () {
      var d = document, s = d.createElement('script');
      s.src = 'https://robotics.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
      powered by Disqus.</a></noscript></div>

    </section>
    <footer class="condensed">
      <ul class="social about-footer condensed"><a href="https://www.linkedin.com/in/giseop-kim-71683088" target="_blank">
          <li>
            <i class="icon-linkedin-squared"></i>
          </li>
        </a><a href="https://scholar.google.com/citations?user=9mKOLX8AAAAJ&hl=ko&oi=ao" target="_blank">
          <li>
            <i class="ai ai-google-scholar"></i>
          </li>
        </a><a href="https://github.com/gisbi-kim" target="_blank">
          <li>
            <i class="icon-github-circled"></i>
          </li>
        </a><a href="https://bit.ly/giseopkim" target="_blank">
          <li>
            <i class="fa fa-user" style="font-size: 2.09em;"></i>
            <!-- <i> notion</i> -->
            <!-- <i class="fa fa-user"></i> -->
          </li>
        </a><a href="https://youtube.com/channel/UCrmVMJ3KEFbDD9EtnAmDT6g" target="_blank">
          <li>
            <i class="icon-youtube"></i>
          </li>
        </a></ul><p class="about-footer condensed">&copy;
        2024</p><div class="about-footer condensed">
        <p>Dark Mode
          <i class="icon-moon"></i>
          <label class="switch">
            <input type="checkbox" class="dark-mode-toggle">
            <span class="slider round" onclick="toggleDarkMode()"></span>
          </label>
        </p>
      </div>
    </footer>
  </main>
  
  <script type="text/javascript" src="/assets/js/darkmode.js"></script>
  
  <script src="/assets/js/simple-jekyll-search.min.js"></script>
  <script src="/assets/js/search.js"></script>
  
</body>

</html>
